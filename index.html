<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Ela - A Universe Awaits Your Celebration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,300;0,400;1,400&family=Inter:wght@300;400;600&display=swap');

        :root {
            --cosmic-primary: #000428;
            --cosmic-secondary: #004e92;
            --cosmic-accent: #b794f6;
            --cosmic-glow: #9f7aea;
            --cosmic-text: #f0e6ff;
            --scroll-progress: 0;
            --mouse-x: 50%;
            --mouse-y: 50%;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(180deg, var(--cosmic-primary) 0%, var(--cosmic-secondary) 100%);
            font-family: 'Crimson Pro', serif;
            color: var(--cosmic-text);
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        /* Fluid Typography */
        h1 { font-size: clamp(2.5rem, 5vw, 4rem); }
        h2 { font-size: clamp(1.8rem, 4vw, 2.8rem); }
        p { font-size: clamp(1.1rem, 2vw, 1.25rem); }

        /* Portal Entry */
        .portal-overlay {
            position: fixed;
            inset: 0;
            background: radial-gradient(ellipse at var(--mouse-x) var(--mouse-y), #1b2735 0%, #090a0f 100%);
            z-index: 9999;
            display: grid;
            place-items: center;
            transition: opacity 2s cubic-bezier(0.4, 0, 0, 1), transform 2s cubic-bezier(0.4, 0, 0, 1);
            will-change: opacity, transform;
        }

        .portal-overlay.hidden {
            opacity: 0;
            transform: scale(1.05);
            pointer-events: none;
        }

        /* Entrance Animation */
        .entry-content {
            text-align: center;
            animation: breathe 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes breathe {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-15px) scale(1.02); }
        }

        /* Cosmic Text Effect */
        .cosmic-shimmer {
            background: linear-gradient(90deg, var(--cosmic-text), var(--cosmic-accent), var(--cosmic-glow), var(--cosmic-accent), var(--cosmic-text));
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 3s linear infinite;
            filter: drop-shadow(0 0 20px rgba(159, 122, 234, 0.4));
        }

        @keyframes shimmer {
            to { background-position: 200% center; }
        }

        /* Glass Morphism Cards */
        .glass-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 25px;
            padding: 2.5rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .glass-card::before {
            content: '';
            position: absolute;
            inset: -100%;
            background: conic-gradient(from 0deg at 50% 50%, transparent, var(--cosmic-accent), transparent);
            animation: spin 20s linear infinite;
            opacity: 0.05;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Canvas Layers */
        #starCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0;
            transition: opacity 3s ease;
        }

        #starCanvas.visible {
            opacity: 1;
        }

        /* Audio Visualizer */
        .audio-visual {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 4px;
            height: 40px;
            margin: 20px 0;
        }

        .audio-bar {
            width: 4px;
            background: linear-gradient(to top, var(--cosmic-accent), var(--cosmic-glow));
            border-radius: 2px;
            transform-origin: bottom;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .audio-bar.playing {
            animation: wave 1s ease-in-out infinite;
        }

        .audio-bar:nth-child(1) { height: 35%; animation-delay: 0ms; }
        .audio-bar:nth-child(2) { height: 55%; animation-delay: 100ms; }
        .audio-bar:nth-child(3) { height: 45%; animation-delay: 200ms; }
        .audio-bar:nth-child(4) { height: 70%; animation-delay: 300ms; }
        .audio-bar:nth-child(5) { height: 50%; animation-delay: 400ms; }
        .audio-bar:nth-child(6) { height: 60%; animation-delay: 500ms; }
        .audio-bar:nth-child(7) { height: 40%; animation-delay: 600ms; }

        @keyframes wave {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(1.5); }
        }

        /* Interactive Elements */
        .enter-button {
            padding: 18px 50px;
            font-size: 1.2em;
            background: transparent;
            border: 1px solid rgba(183, 148, 246, 0.3);
            color: rgba(255, 255, 255, 0.8);
            border-radius: 50px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            backdrop-filter: blur(10px);
        }

        .enter-button:hover {
            border-color: rgba(183, 148, 246, 0.6);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(183, 148, 246, 0.3);
        }

        /* Letter Content Animation */
        .letter p {
            line-height: 1.9;
            margin-bottom: 25px;
            font-size: 1.15em;
            color: var(--cosmic-text);
            position: relative;
            z-index: 1;
            opacity: 0;
            transform: translateY(20px);
        }

        .letter.visible p {
            animation: fadeUp 0.8s forwards;
        }

        @keyframes fadeUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .letter p:nth-child(1) { animation-delay: 0.1s; }
        .letter p:nth-child(2) { animation-delay: 0.2s; }
        .letter p:nth-child(3) { animation-delay: 0.3s; }
        .letter p:nth-child(4) { animation-delay: 0.4s; }
        .letter p:nth-child(5) { animation-delay: 0.5s; }
        .letter p:nth-child(6) { animation-delay: 0.6s; }
        .letter p:nth-child(7) { animation-delay: 0.7s; }
        .letter p:nth-child(8) { animation-delay: 0.8s; }

        .letter em {
            color: var(--cosmic-accent);
            font-style: normal;
            font-weight: 500;
            transition: all 0.3s;
        }

        /* Birthday Features */
        .feature-card {
            transform: translateY(30px);
            opacity: 0;
            transition: all 0.8s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .feature-card.visible {
            transform: translateY(0);
            opacity: 1;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            h1 { font-size: 2em; }
            .letter { padding: 30px 20px; }
        }

        /* Reduce Motion */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <!-- Star Canvas Background -->
    <canvas id="starCanvas"></canvas>

    <!-- Entry Portal -->
    <div class="portal-overlay" id="entryOverlay">
        <div class="entry-content">
            <h1 class="cosmic-shimmer mb-6">A Birthday Journey Through the Stars</h1>
            <p class="text-xl mb-8 opacity-80">For Ela, who deserves the universe</p>
            <button class="enter-button" id="enterBtn">Enter & Listen ✨</button>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container mx-auto px-4 py-8 relative z-10 opacity-0 transition-all duration-1500" id="mainContainer" style="transition: opacity 1.5s cubic-bezier(0.22, 1, 0.36, 1);">
        
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="cosmic-shimmer">Happy Birthday, Ela</h1>
            <p class="text-xl mt-4 opacity-90">Today the cosmos celebrates you</p>
        </header>

        <!-- Audio Section -->
        <section class="max-w-lg mx-auto mb-12 glass-card feature-card" id="audioSection">
            <h2 class="text-center text-xl mb-4 text-purple-300">♪ Pisces - Tony Ann (Piano Cover) ♪</h2>
            <p class="text-center text-sm mb-4 opacity-70">A melody for your special day</p>
            <div class="audio-visual" id="audioVisual">
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
            </div>
            <audio id="bgMusic" loop>
                <source src="Pisces - Tony Ann (Piano Cover).mp3" type="audio/mpeg">
            </audio>
        </section>

        <!-- Birthday Countdown -->
        <section class="max-w-lg mx-auto mb-12 glass-card text-center feature-card" id="countdownSection">
            <h2 class="text-2xl mb-6 text-purple-300">Your Next Solar Return</h2>
            <div class="grid grid-cols-4 gap-4">
                <div>
                    <div class="text-3xl font-bold cosmic-shimmer" id="days">365</div>
                    <div class="text-sm opacity-70">Days</div>
                </div>
                <div>
                    <div class="text-3xl font-bold cosmic-shimmer" id="hours">00</div>
                    <div class="text-sm opacity-70">Hours</div>
                </div>
                <div>
                    <div class="text-3xl font-bold cosmic-shimmer" id="minutes">00</div>
                    <div class="text-sm opacity-70">Minutes</div>
                </div>
                <div>
                    <div class="text-3xl font-bold cosmic-shimmer" id="seconds">00</div>
                    <div class="text-sm opacity-70">Seconds</div>
                </div>
            </div>
        </section>

        <!-- Interactive Wish Generator -->
        <section class="max-w-lg mx-auto mb-12 glass-card text-center feature-card" id="wishSection">
            <h2 class="text-2xl mb-6 text-purple-300">Birthday Wishes from the Universe</h2>
            <p class="text-lg cosmic-shimmer" id="wishText">Click below for a cosmic wish</p>
            <button class="mt-6 px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-full hover:from-purple-700 hover:to-purple-900 transition-all" id="wishBtn">
                Generate New Wish ✨
            </button>
        </section>

        <!-- Birthday Letter -->
        <article class="max-w-4xl mx-auto mb-12 glass-card letter feature-card" id="letterSection">
            <h2 class="text-3xl text-center mb-8 cosmic-shimmer">To Ela, Written in Stardust</h2>
            <div id="letterContent">
                <p>
                    <em>Ela</em>, in the vast expanse of time and space, among billions of souls dancing through existence, there is only one you. Today marks another revolution around the sun, another chapter in the cosmic story that is uniquely, brilliantly, wonderfully yours.
                </p>
                <p>
                    Like stars that burn brightest in the darkest skies, your presence illuminates every room you enter. Not with the harsh glare of artificial light, but with the gentle radiance of someone who carries their own constellation within. You are the kind of person who makes others believe in magic again, simply by being yourself.
                </p>
                <p>
                    Your beauty transcends what eyes can capture — it lives in the space between heartbeats, in the pause before laughter, in the quiet moments when you think no one is watching. It's woven into your kindness, threaded through your strength, and sparkles in the way you see wonder where others might see ordinary.
                </p>
                <p>
                    You possess that rare quality of turning moments into memories without trying. Your smile could convince skeptics that happiness is worth pursuing. Your laugh could make cynics believe in joy again. You don't just exist in this world; you transform it, one gentle gesture at a time.
                </p>
                <p>
                    There's a particular magic in how you navigate life — with grace when it's smooth, with courage when it's rough, always with that inner light that refuses to be dimmed. You're the proof that strength doesn't always roar; sometimes it's the quiet voice at the end of the day saying, "I'll try again tomorrow."
                </p>
                <p>
                    On this birthday, as candles flicker like tiny stars waiting for your wishes, know that you are celebrated not just today, but in every moment your existence touches another soul. You are loved not for what you do, but for who you are — completely, unconditionally, cosmically.
                </p>
                <p>
                    May this new year of your life bring you adventures that match your spirit, joy that matches your heart's capacity, and love that mirrors what you give to the world. May you always remember that in the grand symphony of the universe, your note is essential, irreplaceable, <em>perfect</em>.
                </p>
                <p>
                    Happy Birthday, beautiful soul. The universe is better because you're in it. ✨
                </p>
            </div>
        </article>

        <!-- Closing Message -->
        <footer class="text-center py-12">
            <h2 class="text-2xl cosmic-shimmer mb-4">With infinite love and stardust</h2>
            <p class="opacity-80">Click anywhere to create birthday stars</p>
        </footer>
    </div>

    <script>
        'use strict';

        // Comprehensive Birthday Experience
        const CosmicBirthday = (() => {
            // State Management
            const state = {
                mouseX: 0.5,
                mouseY: 0.5,
                isPlaying: false,
                particles: [],
                birthdayDate: null
            };

            // Birthday Wishes Array
            const wishes = [
                "May your dreams be as infinite as the cosmos",
                "Another year of making the universe brighter",
                "You're the reason stars learned to shine",
                "Today, even gravity celebrates you",
                "May stardust follow your every step",
                "The universe conspired to create perfection: you",
                "Another orbit, another year of your magic",
                "Galaxies spin in celebration of your existence"
            ];

            // Initialize Canvas and Stars
            const initCanvas = () => {
                const canvas = document.getElementById('starCanvas');
                if (!canvas) return null;
                
                const ctx = canvas.getContext('2d');
                
                // Set canvas size
                const resizeCanvas = () => {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                };
                
                resizeCanvas();
                window.addEventListener('resize', resizeCanvas);

                // Star data
                const stars = [];
                const starCount = 200;
                
                // Initialize stars
                for (let i = 0; i < starCount; i++) {
                    stars.push({
                        x: Math.random(),
                        y: Math.random(),
                        size: Math.random() * 2 + 0.5,
                        speed: Math.random() * 0.0005 + 0.0001,
                        brightness: Math.random()
                    });
                }

                // Animation loop
                const animate = () => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // Create gradient background
                    const gradient = ctx.createRadialGradient(
                        canvas.width * state.mouseX,
                        canvas.height * state.mouseY,
                        0,
                        canvas.width / 2,
                        canvas.height / 2,
                        canvas.width
                    );
                    gradient.addColorStop(0, 'rgba(159, 122, 234, 0.02)');
                    gradient.addColorStop(1, 'transparent');
                    ctx.fillStyle = gradient;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);

                    // Draw stars
                    stars.forEach(star => {
                        // Update brightness for twinkling
                        star.brightness += (Math.random() - 0.5) * 0.05;
                        star.brightness = Math.max(0.3, Math.min(1, star.brightness));
                        
                        ctx.beginPath();
                        ctx.arc(
                            star.x * canvas.width,
                            star.y * canvas.height,
                            star.size,
                            0,
                            Math.PI * 2
                        );
                        ctx.fillStyle = `rgba(255, 255, 255, ${star.brightness})`;
                        ctx.fill();
                    });

                    // Draw click particles
                    state.particles = state.particles.filter(p => {
                        p.y -= p.speed;
                        p.life -= 0.01;
                        p.x += Math.sin(p.angle) * 0.5;
                        
                        if (p.life > 0) {
                            ctx.beginPath();
                            ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                            ctx.fillStyle = `rgba(183, 148, 246, ${p.life})`;
                            ctx.fill();
                            return true;
                        }
                        return false;
                    });

                    requestAnimationFrame(animate);
                };

                animate();
                return canvas;
            };

            // Countdown Timer
            const initCountdown = () => {
                const updateCountdown = () => {
                    const now = new Date();
                    const currentYear = now.getFullYear();
                    let birthday = new Date(currentYear, 8, 27); // September 27
                    
                    if (now > birthday) {
                        birthday = new Date(currentYear + 1, 8, 27);
                    }
                    
                    const diff = birthday - now;
                    
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                    
                    const daysEl = document.getElementById('days');
                    const hoursEl = document.getElementById('hours');
                    const minutesEl = document.getElementById('minutes');
                    const secondsEl = document.getElementById('seconds');
                    
                    if (daysEl) daysEl.textContent = days;
                    if (hoursEl) hoursEl.textContent = String(hours).padStart(2, '0');
                    if (minutesEl) minutesEl.textContent = String(minutes).padStart(2, '0');
                    if (secondsEl) secondsEl.textContent = String(seconds).padStart(2, '0');
                };
                
                updateCountdown();
                setInterval(updateCountdown, 1000);
            };

            // Initialize Experience
            const init = () => {
                // Wait for DOM
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', init);
                    return;
                }

                const entryOverlay = document.getElementById('entryOverlay');
                const mainContainer = document.getElementById('mainContainer');
                const enterBtn = document.getElementById('enterBtn');
                const bgMusic = document.getElementById('bgMusic');
                const audioBars = document.querySelectorAll('.audio-bar');
                const starCanvas = document.getElementById('starCanvas');
                const wishBtn = document.getElementById('wishBtn');
                const wishText = document.getElementById('wishText');
                const letterSection = document.getElementById('letterSection');

                // Enter button handler
                if (enterBtn) {
                    enterBtn.addEventListener('click', async () => {
                        // Hide overlay
                        entryOverlay.classList.add('hidden');
                        
                        // Show main content
                        mainContainer.style.opacity = '1';
                        
                        // Show canvas
                        starCanvas.classList.add('visible');
                        
                        // Play music
                        try {
                            await bgMusic.play();
                            state.isPlaying = true;
                            audioBars.forEach(bar => bar.classList.add('playing'));
                        } catch (e) {
                            console.log('Audio autoplay prevented');
                        }
                        
                        // Initialize canvas
                        initCanvas();
                        
                        // Start countdown
                        initCountdown();
                        
                        // Animate sections
                        setTimeout(() => {
                            document.querySelectorAll('.feature-card').forEach((card, i) => {
                                setTimeout(() => card.classList.add('visible'), i * 200);
                            });
                        }, 500);
                        
                        // Animate letter
                        setTimeout(() => {
                            letterSection.classList.add('visible');
                        }, 1000);
                    });
                }

                // Wish generator
                if (wishBtn && wishText) {
                    wishBtn.addEventListener('click', () => {
                        const randomWish = wishes[Math.floor(Math.random() * wishes.length)];
                        wishText.style.opacity = '0';
                        setTimeout(() => {
                            wishText.textContent = randomWish;
                            wishText.style.opacity = '1';
                        }, 300);
                    });
                }

                // Mouse tracking
                document.addEventListener('mousemove', (e) => {
                    state.mouseX = e.clientX / window.innerWidth;
                    state.mouseY = e.clientY / window.innerHeight;
                    document.documentElement.style.setProperty('--mouse-x', `${state.mouseX * 100}%`);
                    document.documentElement.style.setProperty('--mouse-y', `${state.mouseY * 100}%`);
                });

                // Click particles
                document.addEventListener('click', (e) => {
                    if (e.target.tagName === 'BUTTON') return;
                    
                    for (let i = 0; i < 5; i++) {
                        state.particles.push({
                            x: e.clientX,
                            y: e.clientY,
                            size: Math.random() * 3 + 1,
                            speed: Math.random() * 2 + 1,
                            life: 1,
                            angle: Math.random() * Math.PI * 2
                        });
                    }
                });
            };

            return { init };
        })();

        // Initialize when ready
        CosmicBirthday.init();
    </script>
</body>
</html>
