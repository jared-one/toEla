<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ela's Celestial Birthday - A Love Letter Written in Stars</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,300;0,400;1,400&family=Inter:wght@300;400;600&display=swap');

        :root {
            --cosmic-primary: #000428;
            --cosmic-secondary: #004e92;
            --cosmic-accent: #b794f6;
            --cosmic-glow: #9f7aea;
            --cosmic-text: #f0e6ff;
            --mouse-x: 50%;
            --mouse-y: 50%;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(180deg, var(--cosmic-primary) 0%, var(--cosmic-secondary) 100%);
            font-family: 'Crimson Pro', serif;
            color: var(--cosmic-text);
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Simplified Typography */
        h1 { font-size: clamp(2.5rem, 5vw, 4rem); }
        h2 { font-size: clamp(1.8rem, 4vw, 2.5rem); }
        p { font-size: clamp(1.1rem, 2vw, 1.25rem); }

        /* Entry Portal - Simplified */
        .portal-overlay {
            position: fixed;
            inset: 0;
            background: radial-gradient(ellipse at center, #1b2735 0%, #090a0f 100%);
            z-index: 9999;
            display: grid;
            place-items: center;
            transition: opacity 1s ease-out;
        }

        .portal-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* Cosmic Shimmer - Simplified */
        .cosmic-shimmer {
            background: linear-gradient(90deg, var(--cosmic-text), var(--cosmic-accent), var(--cosmic-text));
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 3s linear infinite;
            filter: drop-shadow(0 0 20px rgba(183, 148, 246, 0.3));
        }

        @keyframes shimmer {
            to { background-position: 200% center; }
        }

        /* Glass Card - Simplified */
        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1.5rem;
            padding: 2rem;
            position: relative;
            overflow: hidden;
        }

        /* Single Canvas for better performance */
        #starCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        /* Audio Visualizer - CSS Only */
        .audio-viz {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 4px;
            height: 50px;
            margin: 1.5rem 0;
        }

        .viz-bar {
            width: 4px;
            background: linear-gradient(to top, var(--cosmic-accent), var(--cosmic-glow));
            border-radius: 2px;
            animation: pulse 1s ease-in-out infinite;
        }

        .viz-bar:nth-child(1) { animation-delay: 0s; height: 40%; }
        .viz-bar:nth-child(2) { animation-delay: 0.1s; height: 60%; }
        .viz-bar:nth-child(3) { animation-delay: 0.2s; height: 45%; }
        .viz-bar:nth-child(4) { animation-delay: 0.3s; height: 70%; }
        .viz-bar:nth-child(5) { animation-delay: 0.4s; height: 50%; }
        .viz-bar:nth-child(6) { animation-delay: 0.5s; height: 65%; }
        .viz-bar:nth-child(7) { animation-delay: 0.6s; height: 35%; }

        @keyframes pulse {
            0%, 100% { transform: scaleY(0.5); opacity: 0.5; }
            50% { transform: scaleY(1); opacity: 1; }
        }

        .audio-viz.playing .viz-bar {
            animation-duration: 0.8s;
        }

        /* Interactive Button Styles */
        .magic-button {
            position: relative;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 2.5rem;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            overflow: hidden;
        }

        .magic-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .magic-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .magic-button:hover::before {
            left: 100%;
        }

        /* Game Button Special */
        .game-portal {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .game-portal-button {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 1.2rem 2.5rem;
            border-radius: 50px;
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 10px 40px rgba(245, 87, 108, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .game-portal-button:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 50px rgba(245, 87, 108, 0.6);
        }

        .sparkle {
            animation: sparkle 2s linear infinite;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }

        /* Letter Animation - Simplified */
        .letter-content p {
            line-height: 1.9;
            margin-bottom: 1.5rem;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }

        .letter-content.visible p {
            opacity: 1;
            transform: translateY(0);
        }

        .letter-content.visible p:nth-child(1) { transition-delay: 0.1s; }
        .letter-content.visible p:nth-child(2) { transition-delay: 0.2s; }
        .letter-content.visible p:nth-child(3) { transition-delay: 0.3s; }
        .letter-content.visible p:nth-child(4) { transition-delay: 0.4s; }
        .letter-content.visible p:nth-child(5) { transition-delay: 0.5s; }
        .letter-content.visible p:nth-child(6) { transition-delay: 0.6s; }
        .letter-content.visible p:nth-child(7) { transition-delay: 0.7s; }

        /* Birthday Card */
        .birthday-card {
            background: linear-gradient(135deg, rgba(183, 148, 246, 0.1), rgba(159, 122, 234, 0.1));
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .birthday-card::before {
            content: '‚ú®';
            position: absolute;
            font-size: 100px;
            opacity: 0.1;
            top: -20px;
            right: -20px;
            animation: float 4s ease-in-out infinite;
        }

        /* Countdown */
        .countdown-item {
            text-align: center;
        }

        .countdown-number {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .countdown-label {
            font-size: 0.9rem;
            opacity: 0.7;
            margin-top: 0.25rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .game-portal {
                bottom: 20px;
                right: 20px;
                left: 20px;
            }
            
            .game-portal-button {
                justify-content: center;
                width: 100%;
            }
        }

        /* Loading state */
        .loading {
            opacity: 0.5;
            pointer-events: none;
        }

        /* Success message */
        .success-message {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 1rem 2rem;
            border-radius: 10px;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
            z-index: 10000;
        }

        .success-message.show {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <!-- Single Canvas for Performance -->
    <canvas id="starCanvas" aria-hidden="true"></canvas>

    <!-- Success Message -->
    <div id="successMessage" class="success-message">
        <span id="successText">‚ú® Magic Happening!</span>
    </div>

    <!-- Game Portal Button - Always Visible -->
    <div class="game-portal">
        <a href="index2.html" class="game-portal-button">
            <span>üéÆ Play Birthday Game!</span>
            <span class="sparkle">‚ú®</span>
        </a>
    </div>

    <!-- Entry Portal -->
    <div class="portal-overlay" id="portal">
        <div class="text-center p-8 max-w-2xl">
            <h1 class="cosmic-shimmer mb-6">A Celestial Birthday Journey</h1>
            <p class="text-xl mb-8 opacity-80">For Ela, on her special day</p>
            <button id="enterBtn" class="magic-button">
                Enter the Experience ‚ú®
            </button>
            <p class="text-sm mt-6 opacity-60">Turn on sound for the best experience</p>
        </div>
    </div>

    <!-- Main Content -->
    <main class="relative z-10 container mx-auto px-4 py-12 opacity-0 transition-opacity duration-1000" id="mainContent">
        
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="cosmic-shimmer mb-4">Happy Birthday, Ela</h1>
            <p class="text-xl opacity-90">Today we celebrate the light you bring to this universe</p>
        </header>

        <!-- Quick Actions -->
        <div class="flex flex-wrap justify-center gap-4 mb-12">
            <a href="index2.html" class="magic-button">
                üéØ Make a Wish & Play
            </a>
            <button id="musicBtn" class="magic-button">
                üéµ Play Birthday Music
            </button>
        </div>

        <!-- Audio Player -->
        <section class="max-w-md mx-auto mb-12 glass-card">
            <h2 class="text-center text-xl mb-4 text-purple-300">‚ô™ Your Birthday Melody ‚ô™</h2>
            <div class="audio-viz" id="audioViz">
                <div class="viz-bar"></div>
                <div class="viz-bar"></div>
                <div class="viz-bar"></div>
                <div class="viz-bar"></div>
                <div class="viz-bar"></div>
                <div class="viz-bar"></div>
                <div class="viz-bar"></div>
            </div>
            <audio id="bgMusic" loop preload="auto">
                <source src="Pisces - Tony Ann (Piano Cover).mp3" type="audio/mpeg">
                <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
            </audio>
            <div class="text-center mt-4">
                <button id="playPauseBtn" class="px-6 py-2 bg-purple-600/30 rounded-lg hover:bg-purple-600/50 transition-colors">
                    Play / Pause
                </button>
            </div>
        </section>

        <!-- Birthday Countdown -->
        <section class="max-w-lg mx-auto mb-12 glass-card">
            <h2 class="text-2xl mb-6 text-center text-purple-300">Time Until Next Year's Magic</h2>
            <div class="grid grid-cols-4 gap-4" id="countdown">
                <div class="countdown-item">
                    <div class="countdown-number" id="days">365</div>
                    <div class="countdown-label">Days</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="hours">00</div>
                    <div class="countdown-label">Hours</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="minutes">00</div>
                    <div class="countdown-label">Minutes</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="seconds">00</div>
                    <div class="countdown-label">Seconds</div>
                </div>
            </div>
        </section>

        <!-- Interactive Birthday Card -->
        <section class="max-w-2xl mx-auto mb-12 glass-card">
            <h2 class="text-2xl mb-6 text-center text-purple-300">Your Personalized Birthday Card</h2>
            <div class="birthday-card">
                <h3 class="text-3xl cosmic-shimmer mb-4">Happy Birthday, Ela!</h3>
                <p id="cardMessage" class="text-lg opacity-80 mb-6">Click to generate a magical message</p>
                <div class="flex justify-center gap-4 flex-wrap">
                    <button id="generateBtn" class="magic-button">
                        ‚ú® Generate New Wish
                    </button>
                    <button id="shareBtn" class="magic-button">
                        üíù Share the Love
                    </button>
                </div>
            </div>
        </section>

        <!-- Birthday Letter -->
        <article class="max-w-4xl mx-auto mb-12 glass-card">
            <h2 class="text-3xl mb-8 text-center cosmic-shimmer">To Ela, On Your Birthday</h2>
            <div class="letter-content" id="letterContent">
                <p>
                    <strong>Ela</strong>, birthdays are strange things when you think about them. We pick one day out of 365 to say "this is when we celebrate you existing." But honestly? That feels insufficient. Because the truth is, your existence reshapes every single day for those lucky enough to know you.
                </p>
                <p>
                    Remember last Tuesday when you laughed so hard at that ridiculous meme that you snorted? That wasn't a birthday, but it was a celebration. Or that time you spent twenty minutes picking the perfect shade of nail polish, holding each bottle up to the light like you were choosing the color of the sunset? Those moments‚Äîthose tiny, perfect, entirely you moments‚Äîthey're what birthdays are really about.
                </p>
                <p>
                    You have this thing where you tilt your head slightly when you're really listening to someone. Not the polite listening most people do, but the real kind, where you're absorbing every word like it matters. Because to you, it does. That's rare, Ela. That's the kind of rare that changes people's entire days without you even knowing it.
                </p>
                <p>
                    I love how you get genuinely excited about small pleasures. Good coffee in the morning. Finding a song that perfectly matches your mood. The way autumn light hits the window at 4 PM. You don't just notice these things‚Äîyou celebrate them. You've taught me that joy doesn't always announce itself with fanfare. Sometimes it whispers, and you've trained yourself to hear it.
                </p>
                <p>
                    You're beautiful in ways that have nothing to do with what any mirror could show. It's in your kindness when no one's watching. The way you remember the little things people tell you. How you make space for others' feelings even when your own plate is full. That kind of beauty doesn't fade or change with trends‚Äîit just keeps growing, layer by layer, year by year.
                </p>
                <p>
                    On this birthday, I want you to know that you're not just loved‚Äîyou're understood. Seen. Appreciated for exactly who you are, not who you think you should be. Every quirk, every dream, every moment of doubt, every burst of confidence‚Äîall of it adds up to someone irreplaceable.
                </p>
                <p>
                    Happy birthday, Ela. Here's to another year of you being brilliantly, unapologetically, wonderfully yourself. The universe got it right with you. üí´
                </p>
            </div>
        </article>

        <!-- Dynamic Wishes -->
        <section class="max-w-lg mx-auto mb-12 text-center">
            <p class="text-2xl cosmic-shimmer" id="dynamicWish">With all my love, today and always üí´</p>
        </section>

        <!-- Call to Action -->
        <section class="max-w-2xl mx-auto mb-12 text-center glass-card">
            <h2 class="text-2xl mb-4 cosmic-shimmer">Ready for Something Special?</h2>
            <p class="mb-6 opacity-80">I've created an interactive birthday experience just for you</p>
            <a href="index2.html" class="magic-button inline-block">
                üåü Enter the Birthday Universe üåü
            </a>
        </section>
    </main>

    <script>
        'use strict';

        // Simplified, reliable birthday experience
        const BirthdayApp = {
            // State
            isPlaying: false,
            stars: [],
            
            // Initialize
            init() {
                this.setupCanvas();
                this.bindEvents();
                this.startCountdown();
                this.generateWishes();
            },
            
            // Canvas setup - simplified for reliability
            setupCanvas() {
                const canvas = document.getElementById('starCanvas');
                if (!canvas) return;
                
                const ctx = canvas.getContext('2d');
                
                // Set canvas size
                const resize = () => {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                };
                resize();
                window.addEventListener('resize', resize);
                
                // Create stars
                for (let i = 0; i < 100; i++) {
                    this.stars.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        size: Math.random() * 2 + 0.5,
                        speed: Math.random() * 0.5 + 0.1
                    });
                }
                
                // Animation loop
                const animate = () => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // Draw stars
                    ctx.fillStyle = 'white';
                    this.stars.forEach(star => {
                        ctx.globalAlpha = Math.random() * 0.5 + 0.5;
                        ctx.beginPath();
                        ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                        ctx.fill();
                        
                        // Move star
                        star.y += star.speed;
                        if (star.y > canvas.height) {
                            star.y = 0;
                            star.x = Math.random() * canvas.width;
                        }
                    });
                    
                    requestAnimationFrame(animate);
                };
                animate();
            },
            
            // Event binding
            bindEvents() {
                const portal = document.getElementById('portal');
                const mainContent = document.getElementById('mainContent');
                const enterBtn = document.getElementById('enterBtn');
                const musicBtn = document.getElementById('musicBtn');
                const playPauseBtn = document.getElementById('playPauseBtn');
                const bgMusic = document.getElementById('bgMusic');
                const generateBtn = document.getElementById('generateBtn');
                const shareBtn = document.getElementById('shareBtn');
                const audioViz = document.getElementById('audioViz');
                
                // Enter button
                enterBtn.addEventListener('click', () => {
                    portal.classList.add('hidden');
                    mainContent.style.opacity = '1';
                    
                    // Show letter with delay
                    setTimeout(() => {
                        document.getElementById('letterContent').classList.add('visible');
                    }, 500);
                    
                    this.showSuccess('Welcome to your special day! üéâ');
                });
                
                // Music controls - more reliable
                const playMusic = async () => {
                    try {
                        // Set volume
                        bgMusic.volume = 0.5;
                        
                        // Try to play
                        await bgMusic.play();
                        this.isPlaying = true;
                        audioViz.classList.add('playing');
                        this.showSuccess('Music playing! üéµ');
                    } catch (e) {
                        console.log('Music play failed:', e);
                        this.showSuccess('Click play button to start music');
                    }
                };
                
                const pauseMusic = () => {
                    bgMusic.pause();
                    this.isPlaying = false;
                    audioViz.classList.remove('playing');
                };
                
                // Music button handlers
                musicBtn.addEventListener('click', playMusic);
                
                playPauseBtn.addEventListener('click', () => {
                    if (this.isPlaying) {
                        pauseMusic();
                    } else {
                        playMusic();
                    }
                });
                
                // Generate wish
                generateBtn.addEventListener('click', () => {
                    const messages = [
                        "May your dreams be as limitless as the stars",
                        "Another year of making the world brighter",
                        "You're proof that magic exists",
                        "Today the universe celebrates you",
                        "Your light guides us all",
                        "Pure magic in human form",
                        "A year older, infinitely more amazing"
                    ];
                    
                    const message = messages[Math.floor(Math.random() * messages.length)];
                    document.getElementById('cardMessage').textContent = message;
                    this.showSuccess('New wish generated! ‚ú®');
                });
                
                // Share button
                shareBtn.addEventListener('click', () => {
                    if (navigator.share) {
                        navigator.share({
                            title: 'Birthday Wishes for Ela',
                            text: 'Celebrating an amazing person today!',
                            url: window.location.href
                        });
                    } else {
                        // Fallback - copy to clipboard
                        navigator.clipboard.writeText(window.location.href);
                        this.showSuccess('Link copied to clipboard! üìã');
                    }
                });
            },
            
            // Countdown timer
            startCountdown() {
                const updateCountdown = () => {
                    const now = new Date();
                    const currentYear = now.getFullYear();
                    const birthday = new Date(currentYear, 8, 15); // September 15
                    
                    // If birthday passed this year, set to next year
                    if (now > birthday) {
                        birthday.setFullYear(currentYear + 1);
                    }
                    
                    const diff = birthday - now;
                    
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                    
                    document.getElementById('days').textContent = days;
                    document.getElementById('hours').textContent = String(hours).padStart(2, '0');
                    document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
                    document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
                };
                
                updateCountdown();
                setInterval(updateCountdown, 1000);
            },
            
            // Dynamic wishes
            generateWishes() {
                const wishes = [
                    "Every star tonight shines for you üåü",
                    "Your smile lights up the universe üí´",
                    "Another year of pure magic ‚ú®",
                    "You make the world better just by being you üíù",
                    "Celebrating the miracle that is you üéâ",
                    "Your kindness ripples through the cosmos üåå",
                    "Today we celebrate your light üå†"
                ];
                
                let index = 0;
                setInterval(() => {
                    const wishEl = document.getElementById('dynamicWish');
                    wishEl.style.opacity = '0';
                    
                    setTimeout(() => {
                        index = (index + 1) % wishes.length;
                        wishEl.textContent = wishes[index];
                        wishEl.style.opacity = '1';
                    }, 500);
                }, 5000);
            },
            
            // Show success message
            showSuccess(text) {
                const msg = document.getElementById('successMessage');
                const msgText = document.getElementById('successText');
                
                msgText.textContent = text;
                msg.classList.add('show');
                
                setTimeout(() => {
                    msg.classList.remove('show');
                }, 3000);
            }
        };
        
        // Start when ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => BirthdayApp.init());
        } else {
            BirthdayApp.init();
        }
    </script>
</body>
</html>
